(function(){var t=[].slice;ActionCable.Subscriptions=function(){function n(t){this.consumer=t,this.subscriptions=[]}return n.prototype.create=function(t,n){var i,r,o;return i=t,r="object"==typeof i?i:{channel:i},o=new ActionCable.Subscription(this.consumer,r,n),this.add(o)},n.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},n.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},n.prototype.reject=function(t){var n,i,r,o,e;for(r=this.findAll(t),o=[],n=0,i=r.length;n<i;n++)e=r[n],this.forget(e),this.notify(e,"rejected"),o.push(e);return o},n.prototype.forget=function(t){var n;return this.subscriptions=function(){var i,r,o,e;for(o=this.subscriptions,e=[],i=0,r=o.length;i<r;i++)(n=o[i])!==t&&e.push(n);return e}.call(this),t},n.prototype.findAll=function(t){var n,i,r,o,e;for(r=this.subscriptions,o=[],n=0,i=r.length;n<i;n++)e=r[n],e.identifier===t&&o.push(e);return o},n.prototype.reload=function(){var t,n,i,r,o;for(i=this.subscriptions,r=[],t=0,n=i.length;t<n;t++)o=i[t],r.push(this.sendCommand(o,"subscribe"));return r},n.prototype.notifyAll=function(){var n,i,r,o,e,s,u;for(i=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],e=this.subscriptions,s=[],r=0,o=e.length;r<o;r++)u=e[r],s.push(this.notify.apply(this,[u,i].concat(t.call(n))));return s},n.prototype.notify=function(){var n,i,r,o,e,s,u;for(s=arguments[0],i=arguments[1],n=3<=arguments.length?t.call(arguments,2):[],u="string"==typeof s?this.findAll(s):[s],e=[],r=0,o=u.length;r<o;r++)s=u[r],e.push("function"==typeof s[i]?s[i].apply(s,n):void 0);return e},n.prototype.sendCommand=function(t,n){var i;return i=t.identifier,this.consumer.send({command:n,identifier:i})},n}()}).call(this);